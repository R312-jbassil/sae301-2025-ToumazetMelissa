---
import Layout from "../layouts/Layout.astro";
import pb from "../utils/pb";

// R√©cup√©ration des SVG directement depuis PocketBase (serveur local)
// NOTE: use the actual collection name from your PocketBase admin. If your collection is named "Svgs"
// use 'Svgs' below. Adjust if it's different.
const svgList = await pb.collection('Svgs').getFullList({ sort: "-created" });
---

<Layout>
  <div class="min-h-screen bg-white font-jockey text-[#30475E] px-8 py-12">
    <h1 class="text-3xl font-bold text-center mb-10">üñºÔ∏è Ma biblioth√®que de cr√©ations</h1>

    {svgList.length === 0 ? (
      <p class="text-center text-gray-500">Aucune cr√©ation enregistr√©e pour le moment.</p>
    ) : (
      <div class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-8">
        {svgList.map((svg) => (
          <div class="flex flex-col items-center p-[2px] bg-gradient-to-r from-[#F05454] to-[#30475E] rounded-xl shadow-md">
            <div class="bg-white rounded-xl w-full flex flex-col items-center p-4">
              <div class="w-full h-[250px] flex items-center justify-center overflow-hidden border border-gray-200 rounded-lg bg-gray-50">
                <div set:html={svg.code_svg}></div>
              </div>

              <p class="mt-3 font-semibold text-center">{svg.name}</p>

              <div class="flex justify-center gap-3 mt-4 w-full">
                <a href="/paiement">
                  <button class="bg-[#F05454] text-white px-4 py-2 rounded-full hover:brightness-110 transition">
                    Commander
                  </button>
                </a>

                <a href="/panier">
                  <button class="bg-[#30475E] text-white px-4 py-2 rounded-full hover:brightness-110 transition">
                    Panier
                  </button>
                </a>

                <a href={`/generatorSVG?id=${svg.id}`}>
                  <button class="bg-[#F5A623] text-white px-4 py-2 rounded-full hover:brightness-110 transition">
                    Modifier
                  </button>
                </a>
              </div>
            </div>
          </div>
        ))}
      </div>
    )}
  </div>
</Layout>
